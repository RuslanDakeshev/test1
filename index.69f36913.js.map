{"mappings":"YAAA,IAAMA,EAAOC,SAASC,cAAc,QAC9BC,EAAOF,SAASC,cAAc,SAC9BE,EAASH,SAASC,cAAc,SAQlCG,EAAc,EACdC,EAAU,GAsBoC,SAAzCC,EAAUC,EAAMC,IApBH,SAAFD,EAAMC,GACxB,IAAMC,EAAS,IAAIC,gBAAgB,CACjCC,IAPQ,qCAQRJ,OACAC,IACAI,SAAU,KAGa,OAAlBC,MAAM,GAAeC,OAdb,2BAcU,KAAUA,OAAPL,IACzBM,MAAK,SAAAC,GAEoB,IAAnBA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAGrB,OAACH,EAASI,M,IAEjBC,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,KAI9BG,CAAWlB,EAAMC,GAAGO,MAAK,SAAAW,GACvB,IA0BIC,EA1BEC,EAASF,EAAKG,KA0BhBF,EAlBSC,EAmBZE,KACC,SAAAC,G,IACEC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAIH,EAAJG,KACAC,EAAKJ,EAALI,MACAC,EAAKL,EAALK,MACAC,EAAQN,EAARM,SACAC,EAASP,EAATO,UAEA,MAAO,0CAE2BxB,OAD3BkB,EAAa,gDACqClB,OAAvBmB,EAAc,WAKtCnB,OAL+CoB,EAAK,+JASpDpB,OAJAqB,EAAM,kGAQNrB,OAJAsB,EAAM,sGAQNtB,OAJAuB,EAAS,sGAICvB,OAAVwB,EAAU,kD,IAMvBC,KAAK,IACRrC,EAAKsC,mBAAmB,YAAab,GA9CnCvB,GAAe,EAEfD,EAAOsC,UAAUC,OAAO,Y,IA+CD3C,EAAtB4C,iBAAiB,UAAU,SAAAC,GAC9BA,EAAMC,iBACN,IAAMC,EAAQF,EAAMG,OAAOC,SAASF,MAAMG,MAC1C5C,EAAUyC,EACV1C,EAAc,EACdF,EAAKgD,UAAY,GACZJ,GAGLxC,EAAUF,EAAa0C,E,IAGzB3C,EAAOwC,iBAAiB,SAAS,WAC/BrC,EAAUF,EAAaC,E","sources":["src/index.js"],"sourcesContent":["const form = document.querySelector('form');\nconst list = document.querySelector('.list');\nconst button = document.querySelector('.more');\n\n// const BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n// const API = '9cTjAjlRB53wyhAFk5VzXcBu5GiPU6fK';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API = '30624593-67a024fcb44d725cda2d85f07';\n\nlet pageToFetch = 1;\nlet keyword = '';\n// функция запроса на сервер//\nfunction fetchEvent(page, q) {\n  const params = new URLSearchParams({\n    key: API,\n    page,\n    q,\n    per_page: 40,\n  });\n  //возвращаем результат работы fetch//\n  return fetch(`${BASE_URL}?${params}`)\n    .then(response => {\n      //ответ с бекенда и проверка на 400//\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      //парсим json//\n      return response.json();\n    })\n    .catch(error => console.log(error));\n}\n//возвращает распарсеный json, data-значение переменной,hits-массив с бека//\nfunction getEvents(page, q) {\n  fetchEvent(page, q).then(data => {\n    const events = data.hits;\n    // if (events) {\n    //   renderEvents(events);\n    // }\n    // if (data.page.totalElements === 0) {\n    //   button.classList.add('invisible');\n    //   alert(`There are no events by keyword ${q}`)\n    // }\n    renderEvents(events);\n\n    //если последняя страница-скрываем кнопку\n    //  if (pageToFetch === totalPages) {\n    //    button.classList.add('invisible');\n    //    alert('Finish');\n    //    return;\n    //  }\n\n    pageToFetch += 1;\n    // if (data.page.totalPages > 1) {\n    button.classList.remove('invisible');\n    // }\n  });\n}\n// getEvents();\n//рендер разметки//\nfunction renderEvents(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"photo-card\">\n    <a href=\"${webformatURL}\">\n      <img class=\"photo-card__img\" src=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"320\" height=\"212\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>\n          <span>${likes}</span>\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>\n          <span>${views}</span>\n        </p>\n        <p class=\"info-item\"> \n          <b>Comments</b>\n          <span>${comments}</span>\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>\n          <span>${downloads}</span>\n        </p>\n      </div>\n    </div>`;\n      }\n    )\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n}\n//при сабмите формы-поиск событий\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = event.target.elements.query.value;\n  keyword = query;\n  pageToFetch = 1;\n  list.innerHTML = '';\n  if (!query) {\n    return;\n  }\n  getEvents(pageToFetch, query);\n});\n//подгружать собыития при нажатии на кнопку\nbutton.addEventListener('click', () => {\n  getEvents(pageToFetch, keyword);\n});\n"],"names":["$b8f9b7833fa37166$var$form","document","querySelector","$b8f9b7833fa37166$var$list","$b8f9b7833fa37166$var$button","$b8f9b7833fa37166$var$pageToFetch","$b8f9b7833fa37166$var$keyword","$b8f9b7833fa37166$var$getEvents","page","q","params","URLSearchParams","key","per_page","fetch","concat","then","response","ok","Error","status","json","catch","error","console","log","$b8f9b7833fa37166$var$fetchEvent","data","markup","events","hits","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","classList","remove","addEventListener","event","preventDefault","query","target","elements","value","innerHTML"],"version":3,"file":"index.69f36913.js.map"}